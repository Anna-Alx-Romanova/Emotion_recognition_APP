{% extends "public/templates/public_template.html" %}


{% block main%}

<div class="container">
  <div class="row">
    <div class="col">
      <h1>Welcome to Sentiment analysis service</h1>
      <div class="bg-info">
        <div style="height:5px"></div>
        <h6>The 'Sentiment analysis' model is trained to recognize sentiment from the face in the image.</h6>
        <h6>Simply pass in an image input with a publicly accessible URL or by directly sending image bytes.</h6>
        <div style="height:5px"></div>
      </div>
    </div>
  </div>
</div>
<div style="height:10px"></div>
<div class="container">
  <form action="/" method="POST" enctype="multipart/form-data">
  <div class="row">
    <div class="col-sm-8">
      <div class="form-group mx-sm-3 mb-2">
        <div class="custom-file">
          <label for="image" class="custom-file-label">Choose images to upload (PNG, JPG)</label>
          <input oninput="filesize(this);" type="file" class="custom-file-input" name="image" id="image">
        </div>
      </div>
    </div>
    <div class="col-sm-4">
      <button type="submit" class="btn btn-secondary">EXECTUTE ANALYSIS</button>
    </div>
  </div>
  <hr>
  <div class="row justify-content-md-center">
    <div class="col-md-auto">
      <div style="height:10px"></div>
      {% if loaded_image == null or fname == '' %}
      <img style="max-height: 400px;" src="static/img/emotion-sentiment-digital-intelligence.jpg" alt="">
      {% else %}
      <img id="myImg" style="height: 400px;max-width:1000px" src={{ loaded_image }} alt="" >
        <div id="myModal" class="modal">
          <span class="close">&times;</span>
          <img class="modal-content" id="img01">
          <div id="caption"></div>
        </div>
      {% endif %}
    </div>
  </div>
</form>
</div>
{% endblock %}
{% block script %}

<script>

  function filesize(elem) {
    document.cookie = `filesize=${elem.files[0].size}`
  }
  var modal = document.getElementById("myModal");

// Get the image and insert it inside the modal - use its "alt" text as a caption
var img = document.getElementById("myImg");
var modalImg = document.getElementById("img01");
var captionText = document.getElementById("caption");
img.onclick = function(){
  modal.style.display = "block";
  modalImg.src = this.src;
  captionText.innerHTML = this.alt;
}

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks on <span> (x), close the modal
span.onclick = function() { 
  modal.style.display = "none";
}
</script>

{% endblock %}